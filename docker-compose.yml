version: '3.8'

services:
  paisa-buddy:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - VITE_SUPABASE_URL=${VITE_SUPABASE_URL}
        - VITE_SUPABASE_ANON_KEY=${VITE_SUPABASE_ANON_KEY}
        - VITE_OPENROUTER_API_KEY=${VITE_OPENROUTER_API_KEY}
    container_name: paisa-buddy
    restart: unless-stopped
    networks:
      - n8n-compose_default
    labels:
      - traefik.enable=true
      - traefik.http.routers.paisa.rule=Host(`paisa.021413.xyz`)
      - traefik.http.routers.paisa.entrypoints=web,websecure
      - traefik.http.routers.paisa.tls=true
      - traefik.http.routers.paisa.tls.certresolver=mytlschallenge
      - traefik.http.services.paisa.loadbalancer.server.port=80

networks:
  n8n-compose_default:
    external: true
